<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Payment | Booking.com</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="images/favicon.png">
</head>
<body class="min-h-screen bg-gray-100">
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="flex items-center justify-between h-16">
                <div class="logo">
                    <a href="index.html" class="logo">Booking.com</a>
                </div>
                <div class="flex items-center space-x-2 text-sm">
                    <span class="currency-badge">ZAR</span>
                    <span>Secure Payment</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Payment Content -->
    <div class="container px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <div class="grid grid-cols-1 lg-grid-cols-3 gap-8">
                <!-- Payment Form -->
                <div class="lg:col-span-2">
                    <div class="card mb-6">
                        <div class="p-6">
                            <h2 class="text-xl font-bold mb-6">Payment Details</h2>
                            
                            <!-- Payment Methods -->
                            <div class="mb-6">
                                <h3 class="font-medium mb-4">Choose your payment method</h3>
                                <div class="space-y-3">
                                    <label class="flex items-center p-4 border rounded cursor-pointer hover:bg-gray-50">
                                        <input type="radio" name="paymentMethod" value="card" class="radio-input mr-3" checked>
                                        <div class="flex items-center space-x-3">
                                            <span class="text-2xl">ðŸ’³</span>
                                            <span>Credit/Debit Card</span>
                                        </div>
                                    </label>
                                    <label class="flex items-center p-4 border rounded cursor-pointer hover:bg-gray-50">
                                        <input type="radio" name="paymentMethod" value="paystack" class="radio-input mr-3">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-2xl">ðŸ’°</span>
                                            <span>Paystack</span>
                                        </div>
                                    </label>
                                    <label class="flex items-center p-4 border rounded cursor-pointer hover:bg-gray-50">
                                        <input type="radio" name="paymentMethod" value="googlepay" class="radio-input mr-3">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-2xl">ðŸ“±</span>
                                            <span>Google Pay</span>
                                        </div>
                                    </label>
                                    <label class="flex items-center p-4 border rounded cursor-pointer hover:bg-gray-50">
                                        <input type="radio" name="paymentMethod" value="qr" class="radio-input mr-3">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-2xl">ðŸ“·</span>
                                            <span>QR Code Payment</span>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Card Payment Form -->
                            <div id="cardPaymentForm">
                                <form>
                                    <div class="mb-4">
                                        <label class="form-label">Cardholder Name</label>
                                        <input type="text" class="form-input" placeholder="Name on card" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label class="form-label">Card Number</label>
                                        <input type="text" class="form-input" placeholder="1234 5678 9012 3456" maxlength="19" required>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 gap-4 mb-4">
                                        <div>
                                            <label class="form-label">Expiry Date</label>
                                            <input type="text" class="form-input" placeholder="MM/YY" maxlength="5" required>
                                        </div>
                                        <div>
                                            <label class="form-label">CVV</label>
                                            <input type="text" class="form-input" placeholder="123" maxlength="4" required>
                                        </div>
                                    </div>
                                    
                                    <!-- Discount Code -->
                                    <div class="mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded">
                                        <h4 class="font-medium mb-3">Have a discount code?</h4>
                                        <div class="flex gap-2">
                                            <input type="text" class="form-input flex-1" placeholder="Enter discount code" id="discountCode">
                                            <button type="button" class="btn btn-outline" onclick="applyDiscount()">Apply</button>
                                        </div>
                                        <div id="discountMessage" class="mt-2 text-sm"></div>
                                    </div>
                                    
                                    <div class="mb-6">
                                        <label class="flex items-center space-x-2">
                                            <input type="checkbox" class="checkbox" required>
                                            <span class="text-sm">I agree to the Terms and Conditions and Privacy Policy</span>
                                        </label>
                                    </div>
                                    
                                    <button type="button" class="btn btn-primary w-full btn-lg" onclick="processPayment()">
                                        Complete Payment
                                    </button>
                                </form>
                            </div>

                            <!-- Alternative Payment Forms (hidden by default) -->
                            <div id="paystackForm" style="display: none;">
                                <div class="text-center py-8">
                                    <div class="text-6xl mb-4">ðŸ’°</div>
                                    <h3 class="font-medium mb-4">Paystack Payment</h3>
                                    <p class="text-gray-600 mb-6">You will be redirected to Paystack to complete your payment securely.</p>
                                    <button class="btn btn-primary btn-lg" onclick="redirectToPaystack()">
                                        Continue to Paystack
                                    </button>
                                </div>
                            </div>

                            <div id="googlePayForm" style="display: none;">
                                <div class="text-center py-8">
                                    <div class="text-6xl mb-4">ðŸ“±</div>
                                    <h3 class="font-medium mb-4">Google Pay</h3>
                                    <p class="text-gray-600 mb-6">Use Google Pay for a quick and secure payment.</p>
                                    <button class="btn btn-primary btn-lg" onclick="initiateGooglePay()">
                                        Pay with Google Pay
                                    </button>
                                </div>
                            </div>

                            <div id="qrForm" style="display: none;">
                                <div class="text-center py-8">
                                    <div class="text-6xl mb-4">ðŸ“·</div>
                                    <h3 class="font-medium mb-4">QR Code Payment</h3>
                                    <p class="text-gray-600 mb-4">Scan the QR code below with your banking app</p>
                                    <div class="bg-white p-4 inline-block border rounded">
                                        <div class="w-32 h-32 bg-gray-200 flex items-center justify-center text-4xl">
                                            â¬›â¬œâ¬›<br>â¬œâ¬›â¬œ<br>â¬›â¬œâ¬›
                                        </div>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-4">Amount: ZAR <span id="qrAmount">899</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Booking Summary -->
                <div class="lg:col-span-1">
                    <div class="card">
                        <div class="p-6">
                            <h3 class="font-bold mb-4">Booking Summary</h3>
                            
                            <div class="mb-4">
                                <div class="flex items-center space-x-3 mb-3">
                                    <img src="images/emirates-logo.png" alt="Emirates" class="w-8 h-8">
                                    <div>
                                        <div class="font-medium">Emirates EK201</div>
                                        <div class="text-sm text-gray-600">Cape Town â†’ Johannesburg</div>
                                    </div>
                                </div>
                                
                                <div class="text-sm text-gray-600 space-y-1">
                                    <div>Departure: Oct 18, 2024 at 08:00</div>
                                    <div>Arrival: Oct 18, 2024 at 10:15</div>
                                    <div>Duration: 2h 15m (Direct)</div>
                                    <div>Passenger: 1 Adult</div>
                                </div>
                            </div>
                            
                            <div class="border-t pt-4">
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span>Flight</span>
                                        <span>ZAR 899</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Taxes & fees</span>
                                        <span>ZAR 150</span>
                                    </div>
                                    <div id="discountRow" class="flex justify-between text-green-600" style="display: none;">
                                        <span>Discount</span>
                                        <span id="discountAmount">-ZAR 0</span>
                                    </div>
                                    <div class="border-t pt-2 flex justify-between font-bold">
                                        <span>Total</span>
                                        <span id="totalAmount">ZAR 1,049</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4 p-3 bg-green-50 border border-green-200 rounded text-sm">
                                <div class="flex items-center text-green-700">
                                    <span class="icon mr-2">âœ“</span>
                                    <span>Free cancellation until 24 hours before departure</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Security Notice -->
                    <div class="card mt-4">
                        <div class="p-4">
                            <div class="flex items-center text-green-600 mb-2">
                                <span class="icon mr-2">ðŸ”’</span>
                                <span class="font-medium text-sm">Secure Payment</span>
                            </div>
                            <p class="text-xs text-gray-600">
                                Your payment information is protected with industry-standard encryption.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Success Modal -->
    <div id="successModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-body text-center">
                <div class="text-6xl mb-4">âœ…</div>
                <h3 class="font-bold mb-4">Payment Successful!</h3>
                <p class="text-gray-600 mb-6">
                    Your booking has been confirmed. You will receive a confirmation email shortly.
                </p>
                <div class="space-y-2 mb-6">
                    <button class="btn btn-primary w-full" onclick="downloadTicket()">
                        Download Ticket
                    </button>
                    <button class="btn btn-outline w-full" onclick="goToBookings()">
                        View My Bookings
                    </button>
                </div>
                <button class="btn btn-ghost" onclick="goHome()">
                    Return to Homepage
                </button>
            </div>
        </div>
    </div>

    <script>
        // Discount codes
        const discountCodes = {
            'SAVE10': { type: 'percentage', value: 10, description: '10% off' },
            'SAVE50': { type: 'fixed', value: 50, description: 'ZAR 50 off' },
            'WELCOME20': { type: 'percentage', value: 20, description: '20% off for new users' },
            'FLIGHT15': { type: 'percentage', value: 15, description: '15% off flights' },
            'STUDENT25': { type: 'percentage', value: 25, description: '25% student discount' }
        };

        let currentDiscount = 0;
        let baseTotal = 1049;

        // Handle payment method changes
        document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
            radio.addEventListener('change', function() {
                // Hide all payment forms
                document.getElementById('cardPaymentForm').style.display = 'none';
                document.getElementById('paystackForm').style.display = 'none';
                document.getElementById('googlePayForm').style.display = 'none';
                document.getElementById('qrForm').style.display = 'none';

                // Show selected payment form
                switch(this.value) {
                    case 'card':
                        document.getElementById('cardPaymentForm').style.display = 'block';
                        break;
                    case 'paystack':
                        document.getElementById('paystackForm').style.display = 'block';
                        break;
                    case 'googlepay':
                        document.getElementById('googlePayForm').style.display = 'block';
                        break;
                    case 'qr':
                        document.getElementById('qrForm').style.display = 'block';
                        updateQRAmount();
                        break;
                }
            });
        });

        // Format card number input
        document.querySelector('input[placeholder="1234 5678 9012 3456"]').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
            let formattedInputValue = value.match(/.{1,4}/g)?.join(' ') || value;
            if (formattedInputValue.length <= 19) {
                e.target.value = formattedInputValue;
            }
        });

        // Format expiry date input
        document.querySelector('input[placeholder="MM/YY"]').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            e.target.value = value;
        });

        function applyDiscount() {
            const code = document.getElementById('discountCode').value.toUpperCase();
            const messageDiv = document.getElementById('discountMessage');
            
            if (discountCodes[code]) {
                const discount = discountCodes[code];
                let discountAmount = 0;
                
                if (discount.type === 'percentage') {
                    discountAmount = Math.round(baseTotal * (discount.value / 100));
                } else {
                    discountAmount = discount.value;
                }
                
                currentDiscount = discountAmount;
                updateTotal();
                
                messageDiv.innerHTML = `<span class="text-green-600">âœ“ ${discount.description} applied successfully!</span>`;
                
                // Show discount row
                document.getElementById('discountRow').style.display = 'flex';
                document.getElementById('discountAmount').textContent = `-ZAR ${discountAmount}`;
            } else {
                messageDiv.innerHTML = `<span class="text-red-600">âœ— Invalid discount code</span>`;
                currentDiscount = 0;
                updateTotal();
                document.getElementById('discountRow').style.display = 'none';
            }
        }

        function updateTotal() {
            const newTotal = baseTotal - currentDiscount;
            document.getElementById('totalAmount').textContent = `ZAR ${newTotal}`;
            updateQRAmount();
        }

        function updateQRAmount() {
            const total = baseTotal - currentDiscount;
            document.getElementById('qrAmount').textContent = total;
        }

        function processPayment() {
            // Simulate payment processing
            setTimeout(() => {
                document.getElementById('successModal').style.display = 'flex';
            }, 1000);
        }

        function redirectToPaystack() {
            alert('Redirecting to Paystack payment gateway...');
            // In real implementation, this would redirect to Paystack
            setTimeout(() => {
                document.getElementById('successModal').style.display = 'flex';
            }, 2000);
        }

        function initiateGooglePay() {
            alert('Initiating Google Pay...');
            // In real implementation, this would trigger Google Pay API
            setTimeout(() => {
                document.getElementById('successModal').style.display = 'flex';
            }, 1500);
        }

        function downloadTicket() {
            alert('Downloading your ticket... (In the full app, this would download a PDF ticket)');
        }

        function goToBookings() {
            alert('Redirecting to My Bookings page...');
            window.location.href = 'index.html';
        }

        function goHome() {
            window.location.href = 'index.html';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
    </script>

    <style>
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            border-radius: 0.5rem;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .modal-body {
            padding: 2rem;
        }

        .w-full {
            width: 100%;
        }
    </style>
</body>
</html>